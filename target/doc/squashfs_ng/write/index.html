<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Facilities for writing SquashFS archives."><title>squashfs_ng::write - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-88ada77f01fa54e6.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="squashfs_ng" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06) (built from a source tarball)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../squashfs_ng/index.html">squashfs_ng</a><span class="version">0.1.3</span></h2></div><h2 class="location"><a href="#">Module write</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate squashfs_ng</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">squashfs_ng</a>::<wbr><a class="mod" href="#">write</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/squashfs_ng/write.rs.html#1-702">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Facilities for writing SquashFS archives.</p>
<p>The most straightforward way to write a SquashFS file from a directory tree on-disk is to use a
<a href="struct.TreeProcessor.html" title="struct squashfs_ng::write::TreeProcessor"><code>TreeProcessor</code></a>.  This provides the ability to make “last-minute” modifications to the files
that are added, such as skipping certain files or modifying metadata.</p>
<p>To create a totally “synthetic” SquashFS file that is not built from files in a filesystem,
open a <a href="struct.Writer.html" title="struct squashfs_ng::write::Writer"><code>Writer</code></a> and feed <a href="struct.Source.html" title="struct squashfs_ng::write::Source"><code>Source</code></a>s to it.</p>
<h2 id="limitations"><a class="doc-anchor" href="#limitations">§</a>Limitations</h2>
<p>This library does not yet handle hard links; files with multiple hard links will be archived as
separate files with identical contents (which should be deduplicated and end up taking up
little additional space).</p>
<p>The SquashFS specification includes a field in directory inodes for the parent inode number,
presumably to make <code>..</code> directory entries work.  This is one factor that makes it impossible to
build a SquashFS file without building out the entire directory tree to be archived in memory.
I have tried as hard as poassible to reduce the amount of data that must be stored for each
node added, and this architecture makes it infeasible to store parent inodes in directory
entries.  I hope to fix this some day, and in the meantime it has not caused problems in the
ways I have used the resultant files.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.IntermediateNode.html" title="struct squashfs_ng::write::IntermediateNode">IntermediateNode</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.Source.html" title="struct squashfs_ng::write::Source">Source</a></div><div class="desc docblock-short">A single node to be added to the SquashFS archive.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFile.html" title="struct squashfs_ng::write::SourceFile">SourceFile</a></div><div class="desc docblock-short">A <a href="struct.Source.html" title="struct squashfs_ng::write::Source"><code>Source</code></a> bundled with the path where it should be located.</div></li><li><div class="item-name"><a class="struct" href="struct.TreeIterator.html" title="struct squashfs_ng::write::TreeIterator">TreeIterator</a></div><div class="desc docblock-short">An iterator yielding the nodes in a directory tree in a way suitable for archiving.</div></li><li><div class="item-name"><a class="struct" href="struct.TreeProcessor.html" title="struct squashfs_ng::write::TreeProcessor">TreeProcessor</a></div><div class="desc docblock-short">Tool to help create an archive from a directory in the filesystem.</div></li><li><div class="item-name"><a class="struct" href="struct.Writer.html" title="struct squashfs_ng::write::Writer">Writer</a></div><div class="desc docblock-short">A basic SquashFS writer.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.BlockFlags.html" title="enum squashfs_ng::write::BlockFlags">BlockFlags</a></div><div class="desc docblock-short">Flags to fine-tune how an entry is added to the archive.</div></li><li><div class="item-name"><a class="enum" href="enum.ChildMapEntry.html" title="enum squashfs_ng::write::ChildMapEntry">ChildMapEntry</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.SourceData.html" title="enum squashfs_ng::write::SourceData">SourceData</a></div><div class="desc docblock-short">Represents the data of a filesystem object that can be added to an archive.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.copy_metadata.html" title="fn squashfs_ng::write::copy_metadata">copy_metadata</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.file_xattrs.html" title="fn squashfs_ng::write::file_xattrs">file_xattrs</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul></section></div></main></body></html>